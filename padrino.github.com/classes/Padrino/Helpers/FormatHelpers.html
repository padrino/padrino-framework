<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Padrino::Helpers::FormatHelpers</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
    <script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <table width="100%" border='0' cellpadding='0' cellspacing='0' class='banner'>
        <tr>
            <td class="file-title"><span class="file-title-prefix">Module</span><br />Padrino::Helpers::FormatHelpers</td>
            <td align="right">
                <table cellspacing="0" cellpadding="2">
                    <tr valign="top">
                        <td>In:</td>
                        <td>
                            
                            <a href="../../../files/padrino-helpers/lib/padrino-helpers/format_helpers_rb.html">padrino-helpers/lib/padrino-helpers/format_helpers.rb</a>
                            
                        </td>
                    </tr>
                    
                </table>
            </td>
        </tr>
    </table>
    <div id="bodyContent">
        <div id="content">
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <ul>
        
        <li><a href="#M000183">distance_of_time_in_words</a></li>
        
        <li><a href="#M000169">escape_html</a></li>
        
        <li><a href="#M000195">escape_javascript</a></li>
        
        <li><a href="#M000170">h</a></li>
        
        <li><a href="#M000172">h!</a></li>
        
        <li><a href="#M000196">js_escape_html</a></li>
        
        <li><a href="#M000174">pluralize</a></li>
        
        <li><a href="#M000171">sanitize_html</a></li>
        
        <li><a href="#M000173">simple_format</a></li>
        
        <li><a href="#M000194">time_ago_in_words</a></li>
        
        <li><a href="#M000176">truncate</a></li>
        
        <li><a href="#M000178">word_wrap</a></li>
        
    </ul>
    

    

    

    

    

    

    
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title">
                    
                    <a name="M000183"></a><b>distance_of_time_in_words</b>(from_time, to_time = 0, include_seconds = false, options = {})
                    
                </div>
                
                <div class="description">
                  
                  <p>
Reports the approximate distance in time between two Time or Date objects
or integers as seconds. Set <tt>include_seconds</tt> to true if you want
more detailed approximations when distance < 1 min, 29 secs Distances are
reported based on the following table:
</p>
<pre>
  0 &lt;-&gt; 29 secs                                                             # =&gt; less than a minute
  30 secs &lt;-&gt; 1 min, 29 secs                                                # =&gt; 1 minute
  1 min, 30 secs &lt;-&gt; 44 mins, 29 secs                                       # =&gt; [2..44] minutes
  44 mins, 30 secs &lt;-&gt; 89 mins, 29 secs                                     # =&gt; about 1 hour
  89 mins, 29 secs &lt;-&gt; 23 hrs, 59 mins, 29 secs                             # =&gt; about [2..24] hours
  23 hrs, 59 mins, 29 secs &lt;-&gt; 47 hrs, 59 mins, 29 secs                     # =&gt; 1 day
  47 hrs, 59 mins, 29 secs &lt;-&gt; 29 days, 23 hrs, 59 mins, 29 secs            # =&gt; [2..29] days
  29 days, 23 hrs, 59 mins, 30 secs &lt;-&gt; 59 days, 23 hrs, 59 mins, 29 secs   # =&gt; about 1 month
  59 days, 23 hrs, 59 mins, 30 secs &lt;-&gt; 1 yr minus 1 sec                    # =&gt; [2..12] months
  1 yr &lt;-&gt; 1 yr, 3 months                                                   # =&gt; about 1 year
  1 yr, 3 months &lt;-&gt; 1 yr, 9 months                                         # =&gt; over 1 year
  1 yr, 9 months &lt;-&gt; 2 yr minus 1 sec                                       # =&gt; almost 2 years
  2 yrs &lt;-&gt; max time or date                                                # =&gt; (same rules as 1 yr)
</pre>
<p>
With <tt>include_seconds</tt> = true and the difference < 1 minute 29
seconds:
</p>
<pre>
  0-4   secs      # =&gt; less than 5 seconds
  5-9   secs      # =&gt; less than 10 seconds
  10-19 secs      # =&gt; less than 20 seconds
  20-39 secs      # =&gt; half a minute
  40-59 secs      # =&gt; less than a minute
  60-89 secs      # =&gt; 1 minute
</pre>
<h4>Examples</h4>
<pre>
  from_time = Time.now
  distance_of_time_in_words(from_time, from_time + 50.minutes)        # =&gt; about 1 hour
  distance_of_time_in_words(from_time, 50.minutes.from_now)           # =&gt; about 1 hour
  distance_of_time_in_words(from_time, from_time + 15.seconds)        # =&gt; less than a minute
  distance_of_time_in_words(from_time, from_time + 15.seconds, true)  # =&gt; less than 20 seconds
  distance_of_time_in_words(from_time, 3.years.from_now)              # =&gt; about 3 years
  distance_of_time_in_words(from_time, from_time + 60.hours)          # =&gt; about 3 days
  distance_of_time_in_words(from_time, from_time + 45.seconds, true)  # =&gt; less than a minute
  distance_of_time_in_words(from_time, from_time - 45.seconds, true)  # =&gt; less than a minute
  distance_of_time_in_words(from_time, 76.seconds.from_now)           # =&gt; 1 minute
  distance_of_time_in_words(from_time, from_time + 1.year + 3.days)   # =&gt; about 1 year
  distance_of_time_in_words(from_time, from_time + 3.years + 6.months) # =&gt; over 3 years
  distance_of_time_in_words(from_time, from_time + 4.years + 9.days + 30.minutes + 5.seconds) # =&gt; about 4 years

  to_time = Time.now + 6.years + 19.days
  distance_of_time_in_words(from_time, to_time, true)     # =&gt; about 6 years
  distance_of_time_in_words(to_time, from_time, true)     # =&gt; about 6 years
  distance_of_time_in_words(Time.now, Time.now)           # =&gt; less than a minute
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000183_source')" id="l_M000183_source">show</a>
                        
                        | <a href="http://github.com/padrino/padrino-framework/blob/33b9653e78368a1f57a2ae091d377f4867e0898c/padrino-helpers/lib/padrino-helpers/format_helpers.rb#L114" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000183_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File padrino-helpers/lib/padrino-helpers/format_helpers.rb, line 114</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">distance_of_time_in_words</span>(<span class="ruby-identifier">from_time</span>, <span class="ruby-identifier">to_time</span> = <span class="ruby-value">0</span>, <span class="ruby-identifier">include_seconds</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">options</span> = {})
        <span class="ruby-identifier">from_time</span> = <span class="ruby-identifier">from_time</span>.<span class="ruby-identifier">to_time</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">from_time</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_time</span>)
        <span class="ruby-identifier">to_time</span> = <span class="ruby-identifier">to_time</span>.<span class="ruby-identifier">to_time</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">to_time</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_time</span>)
        <span class="ruby-identifier">distance_in_minutes</span> = (((<span class="ruby-identifier">to_time</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">from_time</span>).<span class="ruby-identifier">abs</span>)<span class="ruby-operator">/</span><span class="ruby-value">60</span>).<span class="ruby-identifier">round</span>
        <span class="ruby-identifier">distance_in_seconds</span> = ((<span class="ruby-identifier">to_time</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">from_time</span>).<span class="ruby-identifier">abs</span>).<span class="ruby-identifier">round</span>

        <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">with_options</span> <span class="ruby-identifier">:locale</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:locale</span>], <span class="ruby-identifier">:scope</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:'datetime.distance_in_words'</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">locale</span><span class="ruby-operator">|</span>
          <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">distance_in_minutes</span>
            <span class="ruby-keyword kw">when</span> <span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>
              <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">distance_in_minutes</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span>
                     <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span>(<span class="ruby-identifier">:less_than_x_minutes</span>, <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>) <span class="ruby-operator">:</span>
                     <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span>(<span class="ruby-identifier">:x_minutes</span>, <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">distance_in_minutes</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">include_seconds</span>

              <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">distance_in_seconds</span>
                <span class="ruby-keyword kw">when</span> <span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">4</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:less_than_x_seconds</span>, <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>
                <span class="ruby-keyword kw">when</span> <span class="ruby-value">5</span><span class="ruby-operator">..</span><span class="ruby-value">9</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:less_than_x_seconds</span>, <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>
                <span class="ruby-keyword kw">when</span> <span class="ruby-value">10</span><span class="ruby-operator">..</span><span class="ruby-value">19</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:less_than_x_seconds</span>, <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">20</span>
                <span class="ruby-keyword kw">when</span> <span class="ruby-value">20</span><span class="ruby-operator">..</span><span class="ruby-value">39</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:half_a_minute</span>
                <span class="ruby-keyword kw">when</span> <span class="ruby-value">40</span><span class="ruby-operator">..</span><span class="ruby-value">59</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:less_than_x_minutes</span>, <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword kw">else</span>             <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:x_minutes</span>,           <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
              <span class="ruby-keyword kw">end</span>

            <span class="ruby-keyword kw">when</span> <span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-value">44</span>           <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:x_minutes</span>,      <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">distance_in_minutes</span>
            <span class="ruby-keyword kw">when</span> <span class="ruby-value">45</span><span class="ruby-operator">..</span><span class="ruby-value">89</span>          <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:about_x_hours</span>,  <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword kw">when</span> <span class="ruby-value">90</span><span class="ruby-operator">..</span><span class="ruby-value">1439</span>        <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:about_x_hours</span>,  <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">distance_in_minutes</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-value">60.0</span>).<span class="ruby-identifier">round</span>
            <span class="ruby-keyword kw">when</span> <span class="ruby-value">1440</span><span class="ruby-operator">..</span><span class="ruby-value">2529</span>      <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:x_days</span>,         <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword kw">when</span> <span class="ruby-value">2530</span><span class="ruby-operator">..</span><span class="ruby-value">43199</span>     <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:x_days</span>,         <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">distance_in_minutes</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-value">1440.0</span>).<span class="ruby-identifier">round</span>
            <span class="ruby-keyword kw">when</span> <span class="ruby-value">43200</span><span class="ruby-operator">..</span><span class="ruby-value">86399</span>    <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:about_x_months</span>, <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
            <span class="ruby-keyword kw">when</span> <span class="ruby-value">86400</span><span class="ruby-operator">..</span><span class="ruby-value">525599</span>   <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span> <span class="ruby-identifier">:x_months</span>,       <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> (<span class="ruby-identifier">distance_in_minutes</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-value">43200.0</span>).<span class="ruby-identifier">round</span>
            <span class="ruby-keyword kw">else</span>
              <span class="ruby-identifier">distance_in_years</span>           = <span class="ruby-identifier">distance_in_minutes</span> <span class="ruby-operator">/</span> <span class="ruby-value">525600</span>
              <span class="ruby-identifier">minute_offset_for_leap_year</span> = (<span class="ruby-identifier">distance_in_years</span> <span class="ruby-operator">/</span> <span class="ruby-value">4</span>) <span class="ruby-operator">*</span> <span class="ruby-value">1440</span>
              <span class="ruby-identifier">remainder</span>                   = ((<span class="ruby-identifier">distance_in_minutes</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">minute_offset_for_leap_year</span>) <span class="ruby-operator">%</span> <span class="ruby-value">525600</span>)
              <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">remainder</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">131400</span>
                <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span>(<span class="ruby-identifier">:about_x_years</span>,  <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">distance_in_years</span>)
              <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">remainder</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">394200</span>
                <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span>(<span class="ruby-identifier">:over_x_years</span>,   <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">distance_in_years</span>)
              <span class="ruby-keyword kw">else</span>
                <span class="ruby-identifier">locale</span>.<span class="ruby-identifier">t</span>(<span class="ruby-identifier">:almost_x_years</span>, <span class="ruby-identifier">:count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">distance_in_years</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
              <span class="ruby-keyword kw">end</span>
          <span class="ruby-keyword kw">end</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title">
                    
                    <a name="M000169"></a><b>escape_html</b>(text)
                    
                </div>
                
                <div class="description">
                  
                  <p>
Returns escaped text to protect against malicious content
</p>

                </div>
                
                
                <div class="aka">
                    This method is also aliased as
                    
                    <a href="FormatHelpers.html#M000170">h</a>
                    
                    <a href="FormatHelpers.html#M000171">sanitize_html</a>
                    
                </div>
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000169_source')" id="l_M000169_source">show</a>
                        
                        | <a href="http://github.com/padrino/padrino-framework/blob/33b9653e78368a1f57a2ae091d377f4867e0898c/padrino-helpers/lib/padrino-helpers/format_helpers.rb#L6" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000169_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File padrino-helpers/lib/padrino-helpers/format_helpers.rb, line 6</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">escape_html</span>(<span class="ruby-identifier">text</span>)
        <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Utils</span>.<span class="ruby-identifier">escape_html</span>(<span class="ruby-identifier">text</span>)
      <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title">
                    
                    <a name="M000195"></a><b>escape_javascript</b>(html_content)
                    
                </div>
                
                <div class="description">
                  
                  <p>
Used in xxxx.js.erb files to escape html so that it can be passed to
javascript from <a href="../../Padrino.html">Padrino</a> <a
href="FormatHelpers.html#M000196">js_escape_html</a>(&#8220;<h1>Hey</h1>&#8221;)
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000195_source')" id="l_M000195_source">show</a>
                        
                        | <a href="http://github.com/padrino/padrino-framework/blob/33b9653e78368a1f57a2ae091d377f4867e0898c/padrino-helpers/lib/padrino-helpers/format_helpers.rb#L172" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000195_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File padrino-helpers/lib/padrino-helpers/format_helpers.rb, line 172</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">escape_javascript</span>(<span class="ruby-identifier">html_content</span>)
        <span class="ruby-keyword kw">return</span> <span class="ruby-value str">''</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">html_content</span>
        <span class="ruby-identifier">javascript_mapping</span> = { <span class="ruby-value str">'\\'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'\\\\'</span>, <span class="ruby-value str">'&lt;/'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&lt;\/'</span>, <span class="ruby-value str">&quot;\r\n&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'\n'</span>, <span class="ruby-value str">&quot;\n&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'\n'</span> }
        <span class="ruby-identifier">javascript_mapping</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value str">&quot;\r&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'\n'</span>, <span class="ruby-value str">'&quot;'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'\\&quot;'</span>, <span class="ruby-value str">&quot;'&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;\\'&quot;</span>)
        <span class="ruby-identifier">escaped_string</span> = <span class="ruby-identifier">html_content</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/(\\|&lt;\/|\r\n|[\n\r&quot;'])/</span>) { <span class="ruby-identifier">javascript_mapping</span>[<span class="ruby-identifier">$1</span>] }
        <span class="ruby-identifier">escaped_string</span>
      <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title">
                    
                    <a name="M000170"></a><b>h</b>(text)
                    
                </div>
                
                <div class="description">
                  
                  <p>
Alias for <a href="FormatHelpers.html#M000169">escape_html</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title">
                    
                    <a name="M000172"></a><b>h!</b>(text, blank_text = '&amp;nbsp;')
                    
                </div>
                
                <div class="description">
                  
                  <p>
Returns escaped text to protect against malicious content Returns blank if
the text is empty
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000172_source')" id="l_M000172_source">show</a>
                        
                        | <a href="http://github.com/padrino/padrino-framework/blob/33b9653e78368a1f57a2ae091d377f4867e0898c/padrino-helpers/lib/padrino-helpers/format_helpers.rb#L14" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000172_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File padrino-helpers/lib/padrino-helpers/format_helpers.rb, line 14</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">h!</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">blank_text</span> = <span class="ruby-value str">'&amp;nbsp;'</span>)
        <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">blank_text</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">h</span> <span class="ruby-identifier">text</span>
      <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title">
                    
                    <a name="M000196"></a><b>js_escape_html</b>(html_content)
                    
                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000196_source')" id="l_M000196_source">show</a>
                        
                        | <a href="http://github.com/padrino/padrino-framework/blob/33b9653e78368a1f57a2ae091d377f4867e0898c/padrino-helpers/lib/padrino-helpers/format_helpers.rb#L180" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000196_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File padrino-helpers/lib/padrino-helpers/format_helpers.rb, line 180</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">js_escape_html</span>(<span class="ruby-identifier">html_content</span>)
        <span class="ruby-node">&quot;\&quot;#{escape_javascript(html_content)}\&quot;&quot;</span>
      <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title">
                    
                    <a name="M000174"></a><b>pluralize</b>(count, singular, plural = nil)
                    
                </div>
                
                <div class="description">
                  
                  <p>
Attempts to pluralize the singular word unless count is 1. If plural is
supplied, it will use that when count is > 1, otherwise it will use the
Inflector to determine the plural form pluralize(2, &#8216;person&#8217;)
=> &#8216;2 people&#8217;
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000174_source')" id="l_M000174_source">show</a>
                        
                        | <a href="http://github.com/padrino/padrino-framework/blob/33b9653e78368a1f57a2ae091d377f4867e0898c/padrino-helpers/lib/padrino-helpers/format_helpers.rb#L36" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000174_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File padrino-helpers/lib/padrino-helpers/format_helpers.rb, line 36</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pluralize</span>(<span class="ruby-identifier">count</span>, <span class="ruby-identifier">singular</span>, <span class="ruby-identifier">plural</span> = <span class="ruby-keyword kw">nil</span>)
        <span class="ruby-node">&quot;#{count || 0} &quot;</span> <span class="ruby-operator">+</span> ((<span class="ruby-identifier">count</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'1'</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">singular</span> <span class="ruby-operator">:</span> (<span class="ruby-identifier">plural</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">singular</span>.<span class="ruby-identifier">pluralize</span>))
      <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title">
                    
                    <a name="M000171"></a><b>sanitize_html</b>(text)
                    
                </div>
                
                <div class="description">
                  
                  <p>
Alias for <a href="FormatHelpers.html#M000169">escape_html</a>
</p>

                </div>
                
                
                
            </div>
            
            <div class="method">
                <div class="title">
                    
                    <a name="M000173"></a><b>simple_format</b>(text, html_options={})
                    
                </div>
                
                <div class="description">
                  
                  <p>
Returns text transformed into HTML using simple formatting rules. Two or
more consecutive newlines(n\n) are considered as a paragraph and wrapped in
<p> tags. One newline (n) is considered as a linebreak and a <br /> tag is
appended. This method does not remove the newlines from the text. <a
href="FormatHelpers.html#M000173">simple_format</a>(&#8220;hellonworld&#8221;)
# => &#8220;<p>hello<br/>world</p>&#8220;
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000173_source')" id="l_M000173_source">show</a>
                        
                        | <a href="http://github.com/padrino/padrino-framework/blob/33b9653e78368a1f57a2ae091d377f4867e0898c/padrino-helpers/lib/padrino-helpers/format_helpers.rb#L23" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000173_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File padrino-helpers/lib/padrino-helpers/format_helpers.rb, line 23</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">simple_format</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">html_options</span>={})
        <span class="ruby-identifier">start_tag</span> = <span class="ruby-identifier">tag</span>(<span class="ruby-value str">'p'</span>, <span class="ruby-identifier">html_options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:open</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
        <span class="ruby-identifier">text</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">dup</span>
        <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\r\n?/</span>, <span class="ruby-value str">&quot;\n&quot;</span>)                    <span class="ruby-comment cmt"># \r\n and \r -&gt; \n</span>
        <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/\n\n+/</span>, <span class="ruby-node">&quot;&lt;/p&gt;\n\n#{start_tag}&quot;</span>)  <span class="ruby-comment cmt"># 2+ newline  -&gt; paragraph</span>
        <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/([^\n]\n)(?=[^\n])/</span>, <span class="ruby-value str">'\1&lt;br /&gt;'</span>) <span class="ruby-comment cmt"># 1 newline   -&gt; br</span>
        <span class="ruby-identifier">text</span>.<span class="ruby-identifier">insert</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">start_tag</span>
        <span class="ruby-identifier">text</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&lt;/p&gt;&quot;</span>
      <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title">
                    
                    <a name="M000194"></a><b>time_ago_in_words</b>(from_time, include_seconds = false)
                    
                </div>
                
                <div class="description">
                  
                  <p>
Like <a href="FormatHelpers.html#M000183">distance_of_time_in_words</a>,
but where <tt>to_time</tt> is fixed to <tt>Time.now</tt>.
</p>
<h4>Examples</h4>
<pre>
  time_ago_in_words(3.minutes.from_now)       # =&gt; 3 minutes
  time_ago_in_words(Time.now - 15.hours)      # =&gt; 15 hours
  time_ago_in_words(Time.now)                 # =&gt; less than a minute

  from_time = Time.now - 3.days - 14.minutes - 25.seconds     # =&gt; 3 days
</pre>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000194_source')" id="l_M000194_source">show</a>
                        
                        | <a href="http://github.com/padrino/padrino-framework/blob/33b9653e78368a1f57a2ae091d377f4867e0898c/padrino-helpers/lib/padrino-helpers/format_helpers.rb#L166" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000194_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File padrino-helpers/lib/padrino-helpers/format_helpers.rb, line 166</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">time_ago_in_words</span>(<span class="ruby-identifier">from_time</span>, <span class="ruby-identifier">include_seconds</span> = <span class="ruby-keyword kw">false</span>)
        <span class="ruby-identifier">distance_of_time_in_words</span>(<span class="ruby-identifier">from_time</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>, <span class="ruby-identifier">include_seconds</span>)
      <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title">
                    
                    <a name="M000176"></a><b>truncate</b>(text, *args)
                    
                </div>
                
                <div class="description">
                  
                  <p>
Truncates a given text after a given :length if text is longer than :length
(defaults to 30). The last characters will be replaced with the :omission
(defaults to &#8220;â€¦&#8221;) for a total length not exceeding :length.
truncate(&#8220;Once upon a time in a world far far away&#8221;, :length =>
8) => &#8220;Once upon...&#8220;
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000176_source')" id="l_M000176_source">show</a>
                        
                        | <a href="http://github.com/padrino/padrino-framework/blob/33b9653e78368a1f57a2ae091d377f4867e0898c/padrino-helpers/lib/padrino-helpers/format_helpers.rb#L43" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000176_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File padrino-helpers/lib/padrino-helpers/format_helpers.rb, line 43</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">truncate</span>(<span class="ruby-identifier">text</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
        <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>
        <span class="ruby-identifier">options</span>.<span class="ruby-identifier">reverse_merge!</span>(<span class="ruby-identifier">:length</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">30</span>, <span class="ruby-identifier">:omission</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;...&quot;</span>)
        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">text</span>
          <span class="ruby-identifier">len</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:length</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:omission</span>].<span class="ruby-identifier">length</span>
          <span class="ruby-identifier">chars</span> = <span class="ruby-identifier">text</span>
          (<span class="ruby-identifier">chars</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:length</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">chars</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">len</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:omission</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">text</span>).<span class="ruby-identifier">to_s</span>
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title">
                    
                    <a name="M000178"></a><b>word_wrap</b>(text, *args)
                    
                </div>
                
                <div class="description">
                  
                  <p>
Wraps the text into lines no longer than line_width width. This method
breaks on the first whitespace character that does not exceed line_width
(which is 80 by default). <a
href="FormatHelpers.html#M000178">word_wrap</a>(&#8216;Once upon a
time&#8217;, :line_width => 8) => &#8220;Once uponna time&#8220;
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000178_source')" id="l_M000178_source">show</a>
                        
                        | <a href="http://github.com/padrino/padrino-framework/blob/33b9653e78368a1f57a2ae091d377f4867e0898c/padrino-helpers/lib/padrino-helpers/format_helpers.rb#L56" target="_blank" class="github_url">on GitHub</a>
                        
                    </p>
                    <div id="M000178_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File padrino-helpers/lib/padrino-helpers/format_helpers.rb, line 56</span>
      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">word_wrap</span>(<span class="ruby-identifier">text</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
        <span class="ruby-identifier">options</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">extract_options!</span>
        <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">blank?</span>
          <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:line_width</span>] = <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">||</span> <span class="ruby-value">80</span>
        <span class="ruby-keyword kw">end</span>
        <span class="ruby-identifier">options</span>.<span class="ruby-identifier">reverse_merge!</span>(<span class="ruby-identifier">:line_width</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">80</span>)

        <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">collect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">line</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:line_width</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/(.{1,#{options[:line_width]}})(\s+|$)/</span>, <span class="ruby-value str">&quot;\\1\n&quot;</span>).<span class="ruby-identifier">strip</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">line</span>
        <span class="ruby-keyword kw">end</span> <span class="ruby-operator">*</span> <span class="ruby-value str">&quot;\n&quot;</span>
      <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    